{% extends 'base-template.html' %}
{% load static %}
{% block content %}
<div class="container-fluid mainsection p-0">
    <div class="container my-4 mx-auto rounded tbgbkg shadow">
        <div class="row">
            <div class="col-12">
                <div class="row p-5">
                    <div class="col-6 text-center">
                        <img src="{{ plant.image }}" class="img w-100 rounded" alt="...">
                    </div>
                    <div class="col-6">
                        <h1 class="card-title">{{plant.name}}</h1>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item tbgbkg">
                                <div class="row">
                                    <div class="col-12">
                                        <div class="row align-items-center">
                                            {% if plant.rating > 0 %}
                                            <div class="col-6 h4">
                                                <span
                                                    class="fa fa-star {% if plant.rating >= 1 %} starchecked {% endif %}"></span>
                                                <span
                                                    class="fa fa-star {% if plant.rating >= 2 %} starchecked {% endif %}"></span>
                                                <span
                                                    class="fa fa-star {% if plant.rating >= 3 %} starchecked {% endif %}"></span>
                                                <span
                                                    class="fa fa-star {% if plant.rating >= 4 %} starchecked {% endif %}"></span>
                                                <span
                                                    class="fa fa-star {% if plant.rating >= 5 %} starchecked {% endif %}"></span>
                                            </div>
                                            <a href="#productreviews" class="tbgatag">
                                                <div class="col-6 h4">
                                                    ({{ plant.rating|floatformat:2 }})
                                                </div>
                                            </a>
                                            {% else %}
                                            <h4>No ratings yet.</h4>
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li class="list-group-item tbgbkg">
                                <div class="row">
                                    <div class="col-12">
                                        <div class="row align-items-center">
                                            <div class="col-6 h4">
                                                <div class="iconreviews" title="Total no. of reviews"
                                                   id="reviewicon" >
                                                </div>
                                            </div>
                                            <div class="col-6 h4">
                                                <a href="#productreviews" class="tbgatag">
                                                    {% if plant.reviews == 1 %}
                                                    {{ plant.reviews}} review
                                                    {% elif plant.reviews > 1 %}
                                                    {{ plant.reviews}} reviews
                                                    {% else %}
                                                    No reviews yet.
                                                    {% endif %}
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li class="list-group-item tbgbkg">
                                <div class="row">
                                    <div class="col-12">
                                        <div class="row align-items-center">
                                            <div class="col-6 h4">
                                                <div class="
                                                    {% if plant.watering == 'Low' %}
                                                    iconlowwatering
                                                    {% elif plant.watering == 'Medium' %}
                                                    iconmidwatering
                                                    {% elif plant.watering == 'High' %}
                                                    iconhighwatering
                                                    {% endif %}                                    
                                                    " title="
                                                    {% if plant.watering == 'Low' %}
                                                    Low
                                                    {% elif plant.watering == 'Medium' %}
                                                    Medium
                                                    {% elif plant.watering == 'High' %}
                                                    High
                                                    {% endif %}  "
                                                    id="watericon">
                                                </div>
                                            </div>
                                            <div class="col-6 h4">
                                                {% if plant.watering == 'Low' %}
                                                Low
                                                {% elif plant.watering == 'Medium' %}
                                                Medium
                                                {% elif plant.watering == 'High' %}
                                                High
                                                {% endif %}
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </li>
                            <li class="list-group-item tbgbkg">
                                <div class="row">
                                    <div class="col-12">
                                        <div class="row align-items-center">
                                            <div class="col-6 h4">
                                                <div class="
                                                    {% if plant.sunlight == 'No_Shade' %}
                                                    iconnoshade
                                                    {% elif plant.sunlight == 'Half_Shade' %}
                                                    iconhalfshade
                                                    {% elif plant.sunlight == 'Full_Shade' %}
                                                    iconfullshade
                                                    {% endif %}                                    
                                                    " title="
                                                    {% if plant.sunlight == 'No_Shade' %}
                                                    Direct sunlight
                                                    {% elif plant.sunlight == 'Half_Shade' %}
                                                    Direct sunlight under shade
                                                    {% elif plant.sunlight == 'Full_Shade' %}
                                                    Indrect sunlight
                                                    {% endif %}  "
                                                    id="sunicon">
                                                </div>
                                            </div>
                                            <div class="col-6 h4">
                                                {% if plant.sunlight == 'No_Shade' %}
                                                Direct sunlight
                                                {% elif plant.sunlight == 'Half_Shade' %}
                                                Direct sunlight under shade
                                                {% elif plant.sunlight == 'Full_Shade' %}
                                                Indrect sunlight
                                                {% endif %}
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </li>
                            <li class="list-group-item tbgbkg">
                                <div class="row">
                                    <div class="col-12">
                                        <div class="row align-items-center">
                                            <div class="col-6 h4">
                                                Difficulty
                                            </div>
                                            <div class="col-6 h4">
                                                {{plant.level}}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li class="list-group-item tbgbkg" >
                                <div class="row">
                                    <div class="col-12">
                                        <div class="row align-items-center">
                                            <div class="col-6 h4">
                                                Species
                                            </div>
                                            <div class="col-6 h4">
                                                {{plant.species}}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <li class="list-group-item tbgbkg">
                                <div class="row">
                                    <div class="col-12">
                                        <div class="row align-items-center">
                                            <div class="col-6 h4">
                                                Country of Origin
                                            </div>
                                            <div class="col-6 h4">
                                                {{plant.country}}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                        <div class="w-100"></div>
                        <div class="row h5 p-3">
                            <p> {{plant.description}}
                            </p>
                        </div>
                        <div class="row pt-2 justify-content-around">
                            <div class="row py-4 w-100">
                                <div class="col-6 h1">
                                    SGD ${{plant.price|floatformat:2}}
                                </div>
                                <div class="col-6 h1">
                                    {% if plant.qty > 3 %}
                                    Qty in stock: {{plant.qty}}
                                    {% elif  plant.qty <= 0 %}
                                    Qty in stock: 0
                                    <h3 style="color:tomato">(out of stock)</h3>
                                    {% elif plant.qty <= 3 and plant.qty > 0 %}
                                    Qty in stock: {{plant.qty}}
                                    <h3 style="color:tomato">(running low)</h3>
                                    {% endif %}
                                </div>
                                <div class="w-100">
                                </div>
                                <div class="col-12 text-center">
                                    {% if not cart.shopping_cart %}
                                    {% for key, item in cart.items %}
                                    {% if plant.id == item.id|add:"0" %}
                                    {% if item.qty < 6 %}
                                    {% else %}
                                    <h6>Limit to 5 per user!</h6>
                                    {% endif %}
                                    {% endif %}
                                    {% endfor %}
                                    {% endif %}
                                </div>
                            </div>
                            <div class="w-100"></div>
                            {% if plant.qty == 0 %}
                            <div class="card-body addcartbtn">
                                <h4 class="text-center" style="color:white; opacity:40%;">Add To Cart</h4>
                            </div>
                            {% else %}
                            <div class="card-body btn addcartbtn">
                                <a href="{% url 'add_to_cart' plant_id=plant.id  %}" class="text-decoration-none">
                                    <h4 class="text-center" style="color:white;">Add To Cart</h4>
                                </a>
                            </div>
                            {% endif %}




                        </div>

                    </div>
                </div>
            </div>
            <div class="w-100"></div>
            <div class="col-12" id="productreviews">
                {% for review in plant_reviews %}
                <div class="row px-5">
                    <div class="col-12 h3">
                        <span class="fa fa-star {% if review.rating >= 1 %} starchecked {% endif %}"></span>
                        <span class="fa fa-star {% if review.rating >= 2 %} starchecked {% endif %}"></span>
                        <span class="fa fa-star {% if review.rating >= 3 %} starchecked {% endif %}"></span>
                        <span class="fa fa-star {% if review.rating >= 4 %} starchecked {% endif %}"></span>
                        <span class="fa fa-star {% if review.rating >= 5 %} starchecked {% endif %}"></span>
                        {{review.date}}
                    </div>
                    <div class="w-100"></div>
                    <div class="col-12 p-0">
                        {% for user in users%}
                        {% if review.reviewed_by_id == user.id %}
                        <p>Reviewed by: {{user}}</p>
                        {% endif %}
                        {% endfor %}
                    </div>
                    <div class="w-100"></div>
                    <div class="col-12 h2">
                        <p>"{{review.content}}"</p>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>

{% endblock %}