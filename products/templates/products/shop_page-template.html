{% extends 'base-template.html' %}
{% load static %}


{% block content %}
<div class="container mainsection d-flex justify-content-center">
    {% for plant in plants%}
    <div class="container shadow m-4">
        <a href="{% url 'product_page' plant_id=plant.id %}">
            <div class="row justify-content-center">
                <img src="{{ plant.image }}" class="img-fluid rounded" alt="...">
                <h3 class="text-center">{{plant.name}}
                </h3>
            </div>
            <div class="row">
                <div class="col">
                    {{plant.watering}}
                    {{plant.sunlight}}
                    {{plant.level}}
                </div>
                <div class="col">
                    <h5>Ratings:
                        {% if plant.rating > 0 %}
                        <span
                            class="fa fa-star {% if plant.rating >= 1 %} starchecked {% endif %}"></span>
                        <span
                            class="fa fa-star {% if plant.rating >= 2 %} starchecked {% endif %}"></span>
                        <span
                            class="fa fa-star {% if plant.rating >= 3 %} starchecked {% endif %}"></span>
                        <span
                            class="fa fa-star {% if plant.rating >= 4 %} starchecked {% endif %}"></span>
                        <span
                            class="fa fa-star {% if plant.rating >= 5 %} starchecked {% endif %}"></span>
                        ({{ plant.rating }})
                        {% else %}
                        No ratings yet.
                        {% endif %}
                    </h5>
                    <h5>Reviews:
                        {% if plant.reviews > 0 %}
                        {{ plant.reviews}}
                        {% else %}
                        No reviews yet.
                        {% endif %}
                    </h5>

                    <h5>${{plant.price}}</h5>

                </div>
            </div>
            <div>
                <a href="#" class="btn btn-primary">Info</a>
                <a href="{% url 'add_to_cart' plant_id=plant.id  %}" id="add-cart" class="btn btn-primary">Add to
                    cart</a>
                    Qty in stock: {{plant.qty}} {% if plant.qty <= 3 %} (Stock is running low) {% endif %}
                {% for key, item in cart.items %}
                {% if plant.id ==  item.id|add:"0" %}
                {% if item.qty > 5 %}
                <p>Limit to 5 per user!</p>
                {% endif %}
                {% else %}
                <p> </p>
                {% endif %}
                {% endfor %}
            </div>
        </a>
    </div>

    {% endfor %}

</div>
{% endblock %}